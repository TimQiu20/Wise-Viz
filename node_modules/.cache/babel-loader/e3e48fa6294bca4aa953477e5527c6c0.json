{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ting\\\\Desktop\\\\job seeking\\\\my-app\\\\src\\\\components\\\\GetPasswordDialog.js\";\nimport React from 'react';\nimport { Dialog, DialogContent, DialogTitle, DialogActions, Button, Slide, TextField } from '@material-ui/core';\nimport { navigate } from 'react-mini-router';\nimport './component_style/Register.css';\nimport axios from 'axios';\n\nfunction Transition(props) {\n  return React.createElement(Slide, Object.assign({\n    direction: \"up\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }));\n}\n/**\n * Invalid new user password or user name view\n */\n\n\nexport default class GetPasswordDialogView extends React.Component {\n  ChangeView(page) {\n    navigate(page);\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleEventChange = () => event => {\n      this.setState({\n        email: event.target.value,\n        invalidEmail: false\n      });\n    };\n\n    this.handleOpen = () => {\n      this.setState({\n        open: true\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.state = {\n      open: false,\n      email: '',\n      invalidEmail: false,\n      item: [],\n      sendEmainEnable: false,\n      currentState: \"Send Email\"\n    };\n    this.validateEmail = this.validateEmail.bind(this);\n    this.sendEmail = this.sendEmail.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getUserInfo = this.getUserInfo.bind(this);\n    this.disableSendEmailBtn = this.disableSendEmailBtn.bind(this);\n    this.sixtySec = this.sixtySec.bind(this);\n  }\n\n  validateEmail(email) {\n    let re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  }\n\n  disableSendEmailBtn() {\n    this.setState({\n      sendEmainEnable: true\n    });\n    let countdown = 30;\n    this.sixtySec(countdown);\n  }\n\n  sixtySec(time) {\n    if (time > 0) {\n      setTimeout(this.sixtySec, 1000, time - 1);\n      this.setState({\n        currentState: 'Resend Email (' + time + ')'\n      });\n    } else {\n      this.setState({\n        currentState: 'Resend Email'\n      });\n      this.setState({\n        sendEmainEnable: false\n      });\n    }\n  }\n\n  getUserInfo() {\n    let data = {\n      email: this.state.email.toLowerCase()\n    };\n    let request = new Request('api/user-info/check-email', {\n      method: 'POST',\n      headers: new Headers({\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify(data)\n    });\n    fetch(request).then(response => response.json()).then(item => this.setState({\n      item\n    })).then(() => this.handleSubmit(this.state.email.toLowerCase(), this.state.item)).catch(err => console.log(err));\n  }\n\n  handleSubmit(email, user) {\n    const message = 'Hi, ' + user[0].userName + '\\n \\nYour password: ' + user[0].password + '\\nHave a good day with Wise-Viz. ^_^' + '\\n \\nBest, \\n \\nWise-Viz';\n    this.disableSendEmailBtn();\n    axios({\n      method: \"POST\",\n      url: \"send\",\n      data: {\n        email: email,\n        message: message\n      }\n    }).then(response => {\n      if (response.data.msg === 'success') {\n        alert(\"Message Sent.\");\n      } else if (response.data.msg === 'fail') {\n        alert(\"Message failed to send.\");\n      }\n    });\n  }\n\n  sendEmail() {\n    let email = this.state.email.toLowerCase();\n    let result = this.validateEmail(email);\n\n    if (!result) {\n      this.setState({\n        invalidEmail: !result\n      });\n    } else {\n      this.getUserInfo();\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Dialog, {\n      open: this.state.open,\n      TransitionComponent: Transition,\n      onClose: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Get Back Password\"), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Please enter the user email to get back the password.\"), React.createElement(\"form\", {\n      className: \"sendEmail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      error: this.state.invalidEmail,\n      label: this.state.invalidEmail ? \"The email is invalid!\" : \"User Email\",\n      margin: \"dense\",\n      className: \"registerText\",\n      value: this.state.email,\n      onChange: this.handleEventChange(),\n      InputLabelProps: {\n        shrink: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: () => this.sendEmail(),\n      color: \"primary\",\n      variant: \"contained\",\n      disabled: this.state.sendEmainEnable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, this.state.currentState))), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.handleClose,\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Go Back\"))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Ting\\Desktop\\job seeking\\my-app\\src\\components\\GetPasswordDialog.js"],"names":["React","Dialog","DialogContent","DialogTitle","DialogActions","Button","Slide","TextField","navigate","axios","Transition","props","GetPasswordDialogView","Component","ChangeView","page","constructor","handleEventChange","event","setState","email","target","value","invalidEmail","handleOpen","open","handleClose","state","item","sendEmainEnable","currentState","validateEmail","bind","sendEmail","handleSubmit","getUserInfo","disableSendEmailBtn","sixtySec","re","test","String","toLowerCase","countdown","time","setTimeout","data","request","Request","method","headers","Headers","body","JSON","stringify","fetch","then","response","json","catch","err","console","log","user","message","userName","password","url","msg","alert","result","render","shrink"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Dialog, DialogContent, DialogTitle, DialogActions, Button, Slide, TextField } from '@material-ui/core';\nimport { navigate } from 'react-mini-router';\nimport './component_style/Register.css';\nimport axios from 'axios';\n\nfunction Transition(props) {\n    return <Slide direction=\"up\" {...props} />;\n}\n\n/**\n * Invalid new user password or user name view\n */\nexport default class GetPasswordDialogView extends React.Component {\n\n    ChangeView(page) {\n        navigate(page);\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n            email: '',\n            invalidEmail: false,\n            item: [],\n            sendEmainEnable: false,\n            currentState: \"Send Email\",\n        };\n        this.validateEmail = this.validateEmail.bind(this);\n        this.sendEmail = this.sendEmail.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.getUserInfo = this.getUserInfo.bind(this);\n        this.disableSendEmailBtn = this.disableSendEmailBtn.bind(this);\n        this.sixtySec = this.sixtySec.bind(this);\n    }\n\n    handleEventChange = () => event => {\n        this.setState({\n            email: event.target.value,\n            invalidEmail: false,\n        });\n    }\n\n    handleOpen = () => {\n        this.setState({ open: true });\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    validateEmail (email) {\n        let re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n    disableSendEmailBtn () {\n        this.setState({sendEmainEnable: true});\n        let countdown = 30;\n        this.sixtySec(countdown);\n    }\n\n    sixtySec (time) {\n        if (time > 0) {\n            setTimeout(this.sixtySec, 1000, time - 1);\n            this.setState({ currentState:'Resend Email (' + time + ')' });\n        } else {\n            this.setState({ currentState:'Resend Email' });\n            this.setState({sendEmainEnable: false });\n        }\n    }\n\n    getUserInfo() {\n        let data = {\n            email: this.state.email.toLowerCase()\n        };\n        let request = new Request('api/user-info/check-email', {\n            method: 'POST',\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n            body: JSON.stringify(data)\n        });\n        fetch(request)\n            .then(response => response.json())\n            .then(item => this.setState({item}))\n            .then(() => this.handleSubmit(this.state.email.toLowerCase(), this.state.item))\n            .catch(err => console.log(err));\n    }\n\n    handleSubmit(email, user){\n        const message = 'Hi, ' + user[0].userName + '\\n \\nYour password: '\n            + user[0].password + '\\nHave a good day with Wise-Viz. ^_^'\n            + '\\n \\nBest, \\n \\nWise-Viz';\n        this.disableSendEmailBtn();\n        axios({\n            method: \"POST\",\n            url:\"send\",\n            data: {\n                email: email,\n                message: message\n            }\n        }).then((response)=>{\n            if (response.data.msg === 'success'){\n                alert(\"Message Sent.\");\n            }else if(response.data.msg === 'fail'){\n                alert(\"Message failed to send.\")\n            }\n        })\n    }\n\n    sendEmail () {\n        let email = this.state.email.toLowerCase();\n        let result = this.validateEmail(email);\n        if (!result) {\n            this.setState({ invalidEmail:!result });\n        } else {\n            this.getUserInfo();\n        }\n    }\n\n    render() {\n        return(\n            <div>\n                <Dialog open={this.state.open} TransitionComponent={Transition} onClose={this.handleClose}>\n                    <DialogTitle>\n                        Get Back Password\n                    </DialogTitle>\n                    <DialogContent>\n                        <br />\n                        <p>Please enter the user email to get back the password.</p>\n                        <form className=\"sendEmail\">\n                            <TextField\n                                error={this.state.invalidEmail}\n                                label={this.state.invalidEmail ? \"The email is invalid!\" : \"User Email\"}\n                                margin=\"dense\"\n                                className=\"registerText\"\n                                value={this.state.email}\n                                onChange={this.handleEventChange()}\n                                InputLabelProps={{ shrink: true }}\n                            />\n                            <Button\n                                onClick={() => this.sendEmail()}\n                                color=\"primary\"\n                                variant=\"contained\"\n                                disabled={this.state.sendEmainEnable}\n                                >{this.state.currentState}</Button>\n                        </form>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleClose} color=\"primary\">Go Back</Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}